import React, { useState } from 'react';
import './InstructionsSection.css';
import ConsultationModal from './ConsultationModal';

const InstructionsSection = () => {
  const [isConsultationModalOpen, setIsConsultationModalOpen] = useState(false);

  const handleConsultationClick = () => {
    setIsConsultationModalOpen(true);
  };
  // Steps content (our SVG icons per your instruction)
  const steps = [
    {
      icon: (
        <svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fillRule="evenodd" clipRule="evenodd" d="M6.24992 2.49992C4.17885 2.49992 2.49992 4.17885 2.49992 6.24992C2.49992 7.3599 2.98232 8.35819 3.74992 9.04527V6.24992C3.74992 4.86922 4.86922 3.74992 6.24992 3.74992C7.63061 3.74992 8.74992 4.86922 8.74992 6.24992V9.04527C9.51752 8.3582 9.99992 7.3599 9.99992 6.24992C9.99992 4.17885 8.32097 2.49992 6.24992 2.49992ZM8.74992 11.0562C10.4822 10.1534 11.6666 8.34081 11.6666 6.24992C11.6666 3.25838 9.24145 0.833252 6.24992 0.833252C3.25838 0.833252 0.833252 3.25838 0.833252 6.24992C0.833252 8.34081 2.01767 10.1534 3.74992 11.0562V18.3333C3.74992 18.7935 4.12301 19.1666 4.58325 19.1666C5.04349 19.1666 5.41659 18.7935 5.41659 18.3333V10.5402C5.41688 10.5274 5.41688 10.5146 5.41659 10.5018V6.24992C5.41659 5.7897 5.7897 5.41658 6.24992 5.41658C6.71014 5.41658 7.08325 5.7897 7.08325 6.24992V10.5018C7.08295 10.5146 7.08295 10.5274 7.08325 10.5402V14.5833C7.08325 14.9753 7.35649 15.3143 7.73956 15.3976L16.6666 17.3382V18.3333C16.6666 18.7935 17.0397 19.1666 17.4999 19.1666C17.9602 19.1666 18.3333 18.7935 18.3333 18.3333V16.6666C18.3333 16.2746 18.06 15.9355 17.6769 15.8523L8.74992 13.9116V11.0562Z" fill="#C8DEFA" fillOpacity="0.8"/>
        </svg>
      ),
      text: 'Рекомендуем приходить по предварительной записи',
    },
    {
      icon: (
        <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9.9873 0.833008C10.2209 0.833093 10.4406 0.949731 10.5791 1.14648L12.0234 3.19727C12.2518 3.52161 12.2025 3.97611 11.9102 4.23828L10.5381 5.46777C13.1964 6.48828 15.0829 9.0655 15.083 12.083C15.083 15.995 11.912 19.167 8 19.167C4.08798 19.167 0.916992 15.995 0.916992 12.083C0.917127 9.0655 2.80361 6.48828 5.46191 5.46777L4.08984 4.23828C3.79563 3.97446 3.74798 3.5167 3.98047 3.19238L5.45117 1.14062C5.59001 0.947186 5.80782 0.833061 6.03906 0.833008H9.9873ZM8 6.28809C7.50776 6.28809 7.02959 6.34934 6.57324 6.46484C4.06252 7.10046 2.20425 9.37475 2.2041 12.083C2.2041 15.2837 4.79926 17.8789 8 17.8789C11.2007 17.8789 13.7959 15.2837 13.7959 12.083C13.7958 9.37475 11.9375 7.10046 9.42676 6.46484C8.97041 6.34934 8.49224 6.28809 8 6.28809ZM5.57031 3.53906L7.24414 5.04004C7.49249 5.0137 7.74467 5 8 5C8.25533 5 8.50751 5.0137 8.75586 5.04004L10.4346 3.53516L9.61523 2.37207H6.40723L5.57031 3.53906Z" fill="#C8DEFA" fillOpacity="0.8"/>
        </svg>
      ),
      text: 'Перед исследованием нужно снять съемные металлические предметы (серьги, цепочки, пирсинги и тд)',
    },
    {
      icon: (
        <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.33301 2.375C7.67819 2.375 7.95801 2.65482 7.95801 3C7.95801 3.34518 7.67819 3.625 7.33301 3.625H1.5C1.38505 3.625 1.29217 3.7181 1.29199 3.83301V13.833C1.29199 13.9481 1.38494 14.042 1.5 14.042H16.5C16.6151 14.042 16.708 13.9481 16.708 13.833C16.7082 13.4881 16.9881 13.2082 17.333 13.208C17.6781 13.208 17.9578 13.488 17.958 13.833C17.958 14.6384 17.3054 15.292 16.5 15.292H1.5C0.694585 15.292 0.0419923 14.6384 0.0419922 13.833V3.83301C0.0421681 3.02774 0.694693 2.375 1.5 2.375H7.33301ZM13.167 10.708C13.5119 10.7082 13.7918 10.9881 13.792 11.333C13.792 11.6781 13.512 11.9578 13.167 11.958H3.16699C2.82181 11.958 2.54199 11.6782 2.54199 11.333C2.54217 10.988 2.82192 10.708 3.16699 10.708H13.167ZM12.7041 0.5C14.2379 0.500209 15.4812 1.74355 15.4814 3.27734C15.4814 4.15389 15.0756 4.93621 14.4414 5.44531C15.6297 5.90044 16.6701 6.81524 17.2676 7.97461C17.417 8.26459 17.3017 8.62015 17.0098 8.76855C16.7179 8.91682 16.3603 8.80164 16.2109 8.51172C15.5297 7.18992 14.1208 6.30957 12.7803 6.30957C12.0462 6.3096 11.5336 6.41216 11.125 6.5791C10.7161 6.74626 10.3734 6.99309 9.99316 7.33594C9.75042 7.55481 9.37476 7.53685 9.1543 7.2959C8.93386 7.0547 8.95151 6.68086 9.19434 6.46191C9.6283 6.07063 10.0879 5.72739 10.6729 5.48828C10.7505 5.45654 10.8302 5.42695 10.9111 5.39941C10.3087 4.88987 9.92578 4.12812 9.92578 3.27734C9.92602 1.74342 11.1701 0.5 12.7041 0.5ZM6.5 6.54199C6.84518 6.54199 7.125 6.82181 7.125 7.16699C7.12482 7.51202 6.84507 7.79199 6.5 7.79199H3.16699C2.82192 7.79199 2.54217 7.51202 2.54199 7.16699C2.54199 6.82181 2.82181 6.54199 3.16699 6.54199H6.5ZM12.7041 1.61133C11.7838 1.61133 11.0373 2.35707 11.0371 3.27734C11.0371 4.19782 11.7836 4.94434 12.7041 4.94434C13.6244 4.94413 14.3701 4.19769 14.3701 3.27734C14.3699 2.3572 13.6243 1.61154 12.7041 1.61133Z" fill="#C8DEFA" fillOpacity="0.8"/>
        </svg>
      ),
      text: 'Не забудьте направление от лечащего врача (при наличии) и документ удостоверяющий личность.',
    },
  ];

  return (
    <section className="instr-section">
      <div className="instr-left-bg" />
      <div className="instr-right-bg" />
      <div className="instr-container">
        {/* Kicker stays on the left column */}
        <div className="instr-kicker">Порядок проведения исследования</div>
        {/* Title row spans both columns: title — divider — button aligned to the right edge */}
        <div className="instr-title-row">
          <h2 className="instr-title">Подготовка к исследованию</h2>
          <div className="instr-title-divider" aria-hidden></div>
          <button className="instr-link" type="button" aria-label="Подробная инструкция">
            <span>Подробная инструкция</span>
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.875 5.625C4.875 5.21079 5.21079 4.875 5.625 4.875H12.375C12.7892 4.875 13.125 5.21079 13.125 5.625V12.375C13.125 12.7892 12.7892 13.125 12.375 13.125C11.9608 13.125 11.625 12.7892 11.625 12.375V7.43566L6.53033 12.5303C6.23744 12.8232 5.76256 12.8232 5.46967 12.5303C5.17678 12.2374 5.17678 11.7626 5.46967 11.4697L10.5643 6.375H5.625C5.21079 6.375 4.875 6.03921 4.875 5.625Z" fill="#C8DEFA" fill-opacity="0.44"/>
            </svg>
          </button>
        </div>

        {/* Left content under title */}
        <div className="instr-left">
          <p className="instr-lead">
            Вам предстоит пройти обследование на высокотехнологичном компьютерном томографе, который
            отвечает самым высоким стандартам качества и безопасности, и в этом вам поможет квалифицированный
            медицинский персонал.
          </p>

          <ul className="instr-list">
            {steps.map((s, i) => (
              <li className="instr-item" key={i}>
                <div className="instr-icon-chip">{s.icon}</div>
                <div className="instr-item-text">{s.text}</div>
              </li>
            ))}
          </ul>

          <div className="instr-cta-wrap">
            <button className="instr-cta" type="button" onClick={handleConsultationClick}>
              <span>Записаться на прием</span>
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9107 4.41082C12.2362 4.08539 12.7638 4.08539 13.0893 4.41083L18.0892 9.41083C18.4146 9.73626 18.4146 10.2639 18.0892 10.5893L13.0893 15.5893C12.7638 15.9148 12.2362 15.9148 11.9107 15.5893C11.5853 15.2639 11.5853 14.7363 11.9107 14.4108L15.4881 10.8334H2.49996C2.03972 10.8334 1.66663 10.4603 1.66663 10.0001C1.66663 9.53984 2.03972 9.16675 2.49996 9.16675H15.4881L11.9107 5.58933C11.5853 5.2639 11.5853 4.73626 11.9107 4.41082Z" fill="#14488C" fill-opacity="0.44"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      {/* Consultation Modal */}
      <ConsultationModal 
        isOpen={isConsultationModalOpen}
        onClose={() => setIsConsultationModalOpen(false)}
      />
    </section>
  );
};

export default InstructionsSection;